<!DOCTYPE html>
<html>
        <a href="{{ url_for('main') }}">
            <button> << </button>
        </a>
    {% if user.username == session["user"] %}
        <a href="{{ url_for('settings') }}">
            <button> Редагувати профіль </button>
        </a>
    {% endif %}
    <h1>{{ user.username }}</h1>
    <h4>{{ "{} {}".format(user.email, user.number if user.number else "")}}</h4>
    <h3>{{ "{} {}".format(user.name if user.name else "", user.surname if user.surname else "")}}</h3>
    {% if user.bio %}
        <h4>{{user.bio}}</h4>
    {% endif %}
    <!-- {% if user.occupation == "psychologist" %}
        <h3>{{user.rating}}</h3>
    {% endif %} -->
    {% if user.occupation == "psychologist" and current_user.occupation == "military" and user.username != session["user"] %}
    <h3>Оцінка:</h3>
    <form method="POST" action="{{ url_for('view_psychologist', id=user.id) }}">
        <div id="stars" style="font-size: 24px; margin-bottom: 10px;">
            {% for i in range(1, 6) %}
                <span class="star" data-value="{{ i }}">&#9734;</span>
            {% endfor %}
        </div>
        <input type="hidden" name="rating" id="rating-value" value="0">
        <button type="submit">Надіслати оцінку</button>
    </form>
{% endif %}

</html>
<script>
    const stars = document.querySelectorAll('.star');
    const ratingInput = document.getElementById('rating-value');
  
    stars.forEach(star => {
      star.addEventListener('click', () => {
        const value = parseInt(star.dataset.value);
        ratingInput.value = value;
  
        stars.forEach(s => {
          s.innerHTML = s.dataset.value <= value ? '★' : '☆';
        });
      });
    });
  </script>
  